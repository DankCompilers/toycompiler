/func/            { return FUNC }
/while/           { return WHILE }
/print/           { return PRINT }
/;/               { return END_LINE }
/\+|-/            { lval.s = yylex.Text(); return ADD_OP }
/\*|\//           { lval.s = yylex.Text(); return MUL_OP }
/=/               { return ASSIGN }
/\(/              { return BEGIN_EXPRESSION  }
/\)/              { return END_EXPRESSION }
/\{/              { return BEGIN_BLOCK }
/\}/              { return END_BLOCK }
/[0-9]+/          { lval.s = yylex.Text(); return NUMBER }
/[a-z][a-z0-9]*/  { lval.s = yylex.Text(); return IDENTIFIER }
/\n+/             { lineno += len(yylex.Text()) }
//
package dsl
import "fmt"

var lineno int

func (yylex Lexer) Error(e string) {
  yylex.p.err = fmt.Sprintf(":%d: error before: '%s'", lineno, yylex.Text())
}